version: '3.7'
services:
  db:
    image: 'postgres:9.6.9'
    ports:
      - ${PG_PORT}:5432
    volumes:
        - pgdata:/var/lib/postgresql:rw
    environment:
        POSTGRES_USER: $PG_USER
        POSTGRES_PASSWORD: $PG_PASS
  alpha1:
    build:
        context: services/alpha1
    ports:
        - 15000:5000
        - 13000:3000
  alpha2:
    build:
        context: services/alpha2
    ports:
        - 15001:5000
        - 13001:3000

volumes:
    pgdata:
      driver: local
      driver_opts:
        type: none
        device: $PWD/shared-volumes/pg
        o: bind
